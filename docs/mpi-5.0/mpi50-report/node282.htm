<!DOCTYPE html>
<html lang=en>
<head>
<!-- This file was generated by tohtml from chap-dynamic/dynamic-2-rendered -->
<!-- with the command
tohtml -default -numbers -dosnl -htables -quietlatex -allgif -endpage mpi5-forum-tail.htm -Wnoredef --mpidoc --latexpgm pdflatex --indexfile mpi50-report-html.idx --lstlisting -basedef mpi5defs.txt -o mpi50-report.tex mpi-reporthtml.tex 
-->
<title>Portable <font face="sans-serif"> MPI</font> Process Startup</title>
</head>
<body style="background-color:#FFFFFF">
<hr><h1><span id="Node282">12.5. Portable  MPI Process Startup</span></h1>
<a href="node281.htm#Node281"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node266.htm#Node266"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node283.htm#Node283"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node266.htm#Node266"> Process Initialization, Creation, and Management</a>
<b>Next: </b><a href="node283.htm#Node283"> <font face="sans-serif"> MPI</font> and Threads</a>
<b>Previous: </b><a href="node281.htm#Node281"> Memory Allocation Info</a>
<p>
  
  
<P> 
A number of implementations of <font face="sans-serif"> MPI</font> provide a startup command for <font face="sans-serif"> MPI</font> programs  
that is of the form  
<tt>mpirun</tt><br> 
<pre><tt>    mpirun &lt;mpirun arguments&gt; &lt;program&gt; &lt;program arguments&gt; 
</tt></pre> 
Separating the command to start the program from the program itself provides  
flexibility, particularly for network and heterogeneous implementations.  For  
example, the startup script need not run on one of the machines that will be  
executing the <font face="sans-serif"> MPI</font> program itself.  
<P> 
Having a standard startup mechanism also extends the portability of  
<font face="sans-serif"> MPI</font> programs one step further, to the command lines  
and scripts that manage them.  For example, a validation suite script  
that runs hundreds of programs can be a portable script if it is  
written using such a standard startup mechanism.  
In order that the ``standard'' command not be confused with existing  
practice, which is not standard and not portable among implementations,  
instead of <tt>mpirun</tt> <font face="sans-serif"> MPI</font> specifies <tt>mpiexec</tt>.  
<P> 
While a standardized startup mechanism improves the usability of <font face="sans-serif"> MPI</font>,  
the range of environments is so diverse (e.g., there may not even be a  
command line interface) that <font face="sans-serif"> MPI</font> cannot mandate such a  
mechanism. Instead, <font face="sans-serif"> MPI</font> specifies an <tt>mpiexec</tt> startup command and  
recommends but does not require it, as advice to implementors.  
However, if an implementation does provide a command called  
<tt>mpiexec</tt>, it must be of the form described below.  
<P> 
It is suggested that  
<br> 
<pre><tt>    mpiexec -n &lt;numprocs&gt; &lt;program&gt; 
</tt></pre> 
be at least one way to start <tt>&lt;program&gt;</tt> with an initial  
set of <tt>&lt;numprocs&gt;</tt> processes, which will be accessible as the process set named <font face="sans-serif"> <span style="font-size:0.900em;"><tt>"</span></tt>mpi://WORLD<span style="font-size:0.900em;"><tt>"</span></tt></font> in the Sessions Model and/or used to form the group associated with the built-in communicator, <font face="sans-serif"> MPI_COMM_WORLD</font> in the World Model.  
Other arguments to <tt>mpiexec</tt> may be implementation-dependent.  
<P> 
 
<br> 
<em> Advice  
        to implementors.</em>  
<P> 
Implementors, if they do provide a special startup command for <font face="sans-serif"> MPI</font> programs,  
  are advised to give it the following form.  The syntax is chosen in order  
  that <tt>mpiexec</tt> be able to be viewed as a command-line version of  
  <font face="sans-serif"> MPI_COMM_SPAWN</font> (See Section <a href="node293.htm#Node293">Reserved Keys</a>).  
<P> 
Analogous to <font face="sans-serif"> MPI_COMM_SPAWN</font>, we  
  have  
<P> 
<br> 
<pre><tt>    mpiexec -n                  &lt;maxprocs&gt; 
           -soft                &lt;        &gt; 
           -host                &lt;        &gt; 
           -arch                &lt;        &gt; 
           -wdir                &lt;        &gt; 
           -path                &lt;        &gt; 
           -file                &lt;        &gt; 
           -initial-errhandler  &lt;        &gt; 
           -memory-alloc-kinds  &lt;        &gt; 
           ... 
           &lt;command line&gt; 
</tt></pre> 
for the case where a single command line for the application program and its  
  arguments will suffice.  See Section <a href="node293.htm#Node293">Reserved Keys</a> for the meanings  
  of these arguments.  For the case corresponding to  
  <font face="sans-serif"> MPI_COMM_SPAWN_MULTIPLE</font> there are two possible formats:  
<P> 
Form A:  
<P> 
<br> 
<pre><tt>    mpiexec { &lt;above arguments&gt; } : { ... } : { ... } : ... : { ... } 
</tt></pre> 
As with <font face="sans-serif"> MPI_COMM_SPAWN</font>, all the arguments are optional.  (Even the  
  <tt>-n x </tt> argument is optional; the default is implementation dependent.  
  It might be <tt>1</tt>, it might be taken from an environment variable, or it  
  might be specified at compile time.)  The names and meanings of the arguments are taken  
  from the keys in the <font face="sans-serif"> info</font> argument to <font face="sans-serif"> MPI_COMM_SPAWN</font>.  There may  
  be other, implementation-dependent arguments as well.  
<P> 
Note that Form A, though convenient to type, prevents colons from being  
  program arguments.  Therefore an alternate, file-based form is allowed:  
<P> 
Form B:  
<P> 
<br> 
<pre><tt>    mpiexec -configfile &lt;filename&gt; 
</tt></pre> 
where the lines of <tt>$&lt;$filename$&gt;$</tt> are of the form separated by the  
colons in Form A.  Lines beginning with `<tt>#</tt>' are comments, and lines  
may be continued by terminating the partial line with `<tt><br></tt>'.  
<br><b> Example</b>  
[Using <tt>mpiexec</tt>, with -n]NeutralUsing mpiexec@Using <tt>mpiexec</tt>!using -n  
Start 16 instances of <tt>myprog</tt> on the current or default machine:  
<br> 
<pre><tt>    mpiexec -n 16 myprog 
</tt></pre> 
  
<br><b> Example</b>  
[Using <tt>mpiexec</tt>, with -host]NeutralUsing mpiexec@Using <tt>mpiexec</tt>!using -host  
Start 10 instances of <tt>myprog</tt> on the machine called <tt>ferrari</tt>:  
<br> 
<pre><tt>    mpiexec -n 10 -host ferrari myprog 
</tt></pre> 
  
<br><b> Example</b>  
[Using <tt>mpiexec</tt>, with separate argument lists]NeutralUsing mpiexec@Using <tt>mpiexec</tt>!starting programs with separate argument lists  
Start 3 instances of the same program <tt>myprog</tt> with different commandline  
  arguments:  
<br> 
<pre><tt>    mpiexec -n 1 myprog infile1 : -n 1 myprog infile2 : -n 1 myprog infile3 
</tt></pre> 
  
<br><b> Example</b>  
[Using <tt>mpiexec</tt>, with -arch]NeutralUsing mpiexec@Using <tt>mpiexec</tt>!using -arch  
  Start 5 instances of the <tt>ocean</tt> program on x86_64 hosts and 10 instances of the <tt>atmos</tt> program on Power9 hosts (Form B):  
<br> 
<pre><tt>    mpiexec -n 5 -arch x86_64 ocean : -n 10 -arch power9 atmos 
</tt></pre> 
It is assumed that the implementation in this case has a method for choosing  
hosts of the appropriate type.  Their ranks in <font face="sans-serif"> MPI_COMM_WORLD</font> are in the order specified.  
  
<br><b> Example</b>  
[Using <tt>mpiexec</tt>, with -configfile]NeutralUsing mpiexec@Using <tt>mpiexec</tt>!using -configfile  
  Start the <tt>ocean</tt> program on five Suns and the <tt>atmos</tt> program on 10  
  RS/6000's (Form B):  
<br> 
<pre><tt>    mpiexec -configfile myfile 
</tt></pre> 
where <tt>myfile</tt> contains  
<br> 
<pre><tt>    -n 5  -arch sun    ocean 
    -n 10 -arch rs6000 atmos 
</tt></pre> 
  
<P> 
 (<em> End of advice to implementors.</em>) <br> 

<P>
<hr>
<a href="node281.htm#Node281"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node266.htm#Node266"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node283.htm#Node283"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node266.htm#Node266"> Process Initialization, Creation, and Management</a>
<b>Next: </b><a href="node283.htm#Node283"> <font face="sans-serif"> MPI</font> and Threads</a>
<b>Previous: </b><a href="node281.htm#Node281"> Memory Allocation Info</a>
<p>
<HR>
Return to <A HREF="node627.htm">MPI-5.0 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-5.0 of June 9, 2025<BR>
HTML Generated on March 2, 2025
</FONT>
</body>
</html>
