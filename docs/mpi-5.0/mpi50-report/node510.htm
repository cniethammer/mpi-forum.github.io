<!DOCTYPE html>
<html lang=en>
<head>
<!-- This file was generated by tohtml from chap-binding/binding-2-rendered -->
<!-- with the command
tohtml -default -numbers -dosnl -htables -quietlatex -allgif -endpage mpi5-forum-tail.htm -Wnoredef --mpidoc --latexpgm pdflatex --indexfile mpi50-report-html.idx --lstlisting -basedef mpi5defs.txt -o mpi50-report.tex mpi-reporthtml.tex 
-->
<title>Status</title>
</head>
<body style="background-color:#FFFFFF">
<hr><h2><span id="Node510">20.3.5. Status</span></h2>
<a href="node509.htm#Node509"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node502.htm#Node502"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node511.htm#Node511"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node502.htm#Node502"> Language Interoperability</a>
<b>Next: </b><a href="node511.htm#Node511"> <font face="sans-serif"> MPI</font> Opaque Objects</a>
<b>Previous: </b><a href="node509.htm#Node509"> Transfer of Handles</a>
<p>
  
  
<P> 
The following two procedures are provided in C to convert from a  
Fortran (with the <tt>mpi</tt> module or deprecated <tt>mpif.h</tt>)  
status (which is an array of integers) to a C status (which is  
a structure), and vice versa.  
The conversion occurs on all the information in status, including that which  
is hidden.  That is, no status information is lost in the conversion.  
<P> 
<br>   <tt> (const MPI_Fint *f_status, MPI_Status *c_status) MPI_Status_f2c <br></tt>MPI_STATUS_F2C  
<P> 
If <font face="sans-serif"> f_status</font> is a valid Fortran status, but not the Fortran value of  
<font face="sans-serif"> MPI_STATUS_IGNORE</font> or <font face="sans-serif"> MPI_STATUSES_IGNORE</font>, then  
<font face="sans-serif"> MPI_Status_f2c</font> returns in <font face="sans-serif"> c_status</font> a valid C status with  
the same content.  If <font face="sans-serif"> f_status</font> is the Fortran value of  
<font face="sans-serif"> MPI_STATUS_IGNORE</font> or <font face="sans-serif"> MPI_STATUSES_IGNORE</font>, or if  
<font face="sans-serif"> f_status</font> is not a valid Fortran status, then the call is erroneous.  
<P> 
  
In C, such an <font face="sans-serif"> f_status</font> array can be defined with <tt>MPI_Fint 
f_status[<font face="sans-serif"> MPI_F_STATUS_SIZE</font>]</tt>. Within this array, one can use in  
C the indexes <font face="sans-serif"> MPI_F_SOURCE</font>, <font face="sans-serif"> MPI_F_TAG</font>, and  
<font face="sans-serif"> MPI_F_ERROR</font>, to access the same elements as in Fortran with  
<font face="sans-serif"> MPI_SOURCE</font>, <font face="sans-serif"> MPI_TAG</font> and <font face="sans-serif"> MPI_ERROR</font>. The C indexes are  
1 less than the corresponding indexes in Fortran due to the different default array  
start indexes in both languages.  
<P> 
The C status has the same source, tag and error code values as the  
Fortran status, and returns the same answers when queried for count,  
elements, and cancellation.  
The conversion function may be called with a Fortran status argument that  
has  
an undefined error field, in which case the value of the error field  
in the C status argument is undefined.  
<P> 
Two global variables of type <tt>MPI_Fint*</tt>,  
<font face="sans-serif"> MPI_F_STATUS_IGNORE</font> and <font face="sans-serif"> MPI_F_STATUSES_IGNORE</font>,  
are declared in <tt>mpi.h</tt>.  They can be used to test, in C, whether  
<font face="sans-serif"> f_status</font> is the Fortran value of <font face="sans-serif"> MPI_STATUS_IGNORE</font>  
or <font face="sans-serif"> MPI_STATUSES_IGNORE</font>  
defined in the <tt>mpi</tt> module or (deprecated) <tt>mpif.h</tt>.  
These are global  
variables, not C constant expressions and cannot be used in places  
where C requires constant expressions. Their value is defined only  
between the calls to <font face="sans-serif"> MPI_INIT</font> and <font face="sans-serif"> MPI_FINALIZE</font>  
and should not be changed by user code.  
<P> 
To do the conversion in the other direction, we have the following:  
<P> 
<br>   <tt> (const MPI_Status *c_status, MPI_Fint *f_status) MPI_Status_c2f <br></tt>MPI_STATUS_C2F  
<P> 
This call converts a C status into a Fortran status, and has a behavior  
similar to <font face="sans-serif"> MPI_Status_f2c</font>.  That is, the value of  
<font face="sans-serif"> c_status</font> must not be either <font face="sans-serif"> MPI_STATUS_IGNORE</font> or  
<font face="sans-serif"> MPI_STATUSES_IGNORE</font>.  
<P> 
 
<br> 
<em> Advice to users.</em>  
<P> 
There exists no separate  
conversion function for arrays of statuses, since one  
can simply loop through the array, converting each status  
with the routines in Figure <a href="node510.htm#Figure40">40</a>.  
 (<em> End of advice to users.</em>) <br> 
 
<br> 
<em> Rationale.</em>  
<P> 
The handling of <font face="sans-serif"> MPI_STATUS_IGNORE</font> is required in order to  
layer libraries with only a C wrapper: if the Fortran call has passed  
<font face="sans-serif"> MPI_STATUS_IGNORE</font>, then the C wrapper must handle this  
correctly.  
Note that this constant need not have the same value in  
Fortran and C.  If <font face="sans-serif"> MPI_Status_f2c</font> were to handle  
<font face="sans-serif"> MPI_STATUS_IGNORE</font>, then the type of its result would have to be  
<tt>MPI_Status**</tt>, which was considered an inferior solution.  
 (<em> End of rationale.</em>) <br> 
  
Using the <tt>mpi_f08</tt> Fortran module, a status is declared  
as <font face="sans-serif"> TYPE(MPI_Status)</font>.  
The C type <font face="sans-serif"> MPI_F08_status</font>  
can be used to pass a  
Fortran <font face="sans-serif"> TYPE(MPI_Status)</font> argument  
into a C routine.  
Figure <a href="node510.htm#Figure40">40</a> illustrates all status conversion  
routines. Some are only available in C, some in both C and the Fortran  
<tt>mpi</tt> and <tt>mpi_f08</tt> interfaces (but not in the deprecated <tt>mpif.h</tt> include file).  
<div style="text-align:center"><P><img width=1060 height=829 src="status-conversion-triangle.gif" alt="Image file"><P>
</div>  
<br> 
<b>Figure 40: </b><span id="Figure40">Status conversion routines</span><P> 
  
  
<br>   <tt> (const MPI_F08_status *f08_status, MPI_Status *c_status) MPI_Status_f082c <br></tt>MPI_STATUS_F082C  
<P> 
This C routine converts a Fortran <tt>mpi_f08</tt> <font face="sans-serif"> TYPE(MPI_Status)</font>  
into a C <font face="sans-serif"> MPI_Status</font>.  
<P> 
<br>   <tt> (const MPI_Status *c_status, MPI_F08_status *f08_status) MPI_Status_c2f08 <br></tt>MPI_STATUS_C2F08  
<P> 
This C routine converts a C <font face="sans-serif"> MPI_Status</font>  
into a Fortran <tt>mpi_f08</tt> <font face="sans-serif"> TYPE(MPI_Status)</font>.  
Two global variables of type <tt>MPI_F08_status*</tt>,  
<font face="sans-serif"> MPI_F08_STATUS_IGNORE</font> and <font face="sans-serif"> MPI_F08_STATUSES_IGNORE</font>  
are declared in <tt>mpi.h</tt>.  They can be used to test, in C, whether  
<font face="sans-serif"> f_status</font> is the Fortran value of <font face="sans-serif"> MPI_STATUS_IGNORE</font>  
or <font face="sans-serif"> MPI_STATUSES_IGNORE</font> defined in the <tt>mpi_f08</tt> module.  
These are global  
variables, not C constant expressions and cannot be used in places  
where C requires constant expressions. Their value is defined only  
between the calls to <font face="sans-serif"> MPI_INIT</font> and <font face="sans-serif"> MPI_FINALIZE</font>  
and should not be changed by user code.  
<P> 
Conversion between the two Fortran versions of a status can be done with:  
<P> 
  
<TABLE><TR><TD COLSPAN=2>MPI_STATUS_F2F08(<span style="white-space:nowrap">f_status</span>, <span style="white-space:nowrap">f08_status</span>)</TD></TR>  
<TR><TD><span style="font-size:0.900em;"> IN</span> f_status</TD><TD>status object declared as array (status)</TD></TR>  
<TR><TD><span style="font-size:0.900em;"> OUT</span> f08_status</TD><TD>status object declared as named type (status)</TD></TR>  
</TABLE>  
  <tt> int MPI_Status_f2f08(const MPI_Fint *f_status, MPI_F08_status *f08_status) <br></tt>  
  <b> Fortran 2008 binding</b><br>  <tt> MPI_Status_f2f08(f_status, f08_status, ierror) <br> INTEGER, INTENT(IN) :: <span style="white-space:nowrap">f_status(MPI_STATUS_SIZE)</span><br>TYPE(MPI_Status), INTENT(OUT) :: <span style="white-space:nowrap">f08_status</span><br>INTEGER, OPTIONAL, INTENT(OUT) :: <span style="white-space:nowrap">ierror</span> <br></tt>  
 <b> Fortran binding (the following procedure is not available with mpif.h)</b><br>  <tt> MPI_STATUS_F2F08(F_STATUS, F08_STATUS, IERROR) <br> INTEGER :: <span style="white-space:nowrap">F_STATUS(MPI_STATUS_SIZE)</span>, <span style="white-space:nowrap">IERROR</span><br>TYPE(MPI_Status) :: <span style="white-space:nowrap">F08_STATUS</span> <br></tt>  
<P> 
This routine converts a Fortran <tt> INTEGER</tt>, <tt> DIMENSION(MPI_STATUS_SIZE)</tt> status array  
into a Fortran <tt>mpi_f08</tt> <font face="sans-serif"> TYPE(MPI_Status)</font>.  
<P> 
<TABLE><TR><TD COLSPAN=2>MPI_STATUS_F082F(<span style="white-space:nowrap">f08_status</span>, <span style="white-space:nowrap">f_status</span>)</TD></TR>  
<TR><TD><span style="font-size:0.900em;"> IN</span> f08_status</TD><TD>status object declared as named type (status)</TD></TR>  
<TR><TD><span style="font-size:0.900em;"> OUT</span> f_status</TD><TD>status object declared as array (status)</TD></TR>  
</TABLE>  
  <b> C binding</b><br>  <tt> int MPI_Status_f082f(const MPI_F08_status *f08_status, MPI_Fint *f_status) <br></tt>  
  <b> Fortran 2008 binding</b><br>  <tt> MPI_Status_f082f(f08_status, f_status, ierror) <br> TYPE(MPI_Status), INTENT(IN) :: <span style="white-space:nowrap">f08_status</span><br>INTEGER, INTENT(OUT) :: <span style="white-space:nowrap">f_status(MPI_STATUS_SIZE)</span><br>INTEGER, OPTIONAL, INTENT(OUT) :: <span style="white-space:nowrap">ierror</span> <br></tt>  
 <b> Fortran binding (the following procedure is not available with mpif.h)</b><br>  <tt> MPI_STATUS_F082F(F08_STATUS, F_STATUS, IERROR) <br> TYPE(MPI_Status) :: <span style="white-space:nowrap">F08_STATUS</span><br>INTEGER :: <span style="white-space:nowrap">F_STATUS(MPI_STATUS_SIZE)</span>, <span style="white-space:nowrap">IERROR</span> <br></tt>  
<P> 
This routine converts a Fortran <tt>mpi_f08</tt> <font face="sans-serif"> TYPE(MPI_Status)</font>  
into a Fortran <tt> INTEGER</tt>, <tt> DIMENSION(MPI_STATUS_SIZE)</tt> status array.  
<P> 

<P>
<hr>
<a href="node509.htm#Node509"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node502.htm#Node502"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node511.htm#Node511"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node502.htm#Node502"> Language Interoperability</a>
<b>Next: </b><a href="node511.htm#Node511"> <font face="sans-serif"> MPI</font> Opaque Objects</a>
<b>Previous: </b><a href="node509.htm#Node509"> Transfer of Handles</a>
<p>
<HR>
Return to <A HREF="node627.htm">MPI-5.0 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-5.0 of June 9, 2025<BR>
HTML Generated on March 2, 2025
</FONT>
</body>
</html>
