<!DOCTYPE html>
<html lang=en>
<head>
<!-- This file was generated by tohtml from chap-io/io-2-rendered -->
<!-- with the command
tohtml -default -numbers -dosnl -htables -quietlatex -allgif -endpage mpi5-forum-tail.htm -Wnoredef --mpidoc --latexpgm pdflatex --indexfile mpi50-report-html.idx --lstlisting -basedef mpi5defs.txt -o mpi50-report.tex mpi-reporthtml.tex 
-->
<title>File Size</title>
</head>
<body style="background-color:#FFFFFF">
<hr><h2><span id="Node394">15.6.10. File Size</span></h2>
<a href="node393.htm#Node393"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node384.htm#Node384"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node395.htm#Node395"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node384.htm#Node384"> Consistency and Semantics</a>
<b>Next: </b><a href="node395.htm#Node395"> Examples</a>
<b>Previous: </b><a href="node393.htm#Node393"> Logical vs. Physical File Layout</a>
<p>
  
  
<P> 
The size of a file may be increased by writing to the file after the  
current end of file.  The size may also be changed by calling  
<font face="sans-serif"> MPI</font> <em> size changing</em> routines,   
such as <font face="sans-serif"> MPI_FILE_SET_SIZE</font>.  A call to a size changing routine   
does not necessarily change the file size.  For example, calling  
<font face="sans-serif"> MPI_FILE_PREALLOCATE</font> with a size less than the current size does  
not change the size.  
<P> 
Consider a set of bytes that has been written to a file since  
the most recent call to a size changing routine,   
or since <font face="sans-serif"> MPI_FILE_OPEN</font> if no such routine has been called.  
Let the <em> high byte</em> be the byte  
in that set with the largest displacement.  The file size  
is the larger of  
<ul> 
 
<li>One plus the displacement of the high byte.  
 
<li>The size immediately after the size changing routine,  
        or <font face="sans-serif"> MPI_FILE_OPEN</font>, returned.  
</ul> 
<br> 
When applying consistency semantics,  
calls to <font face="sans-serif"> MPI_FILE_SET_SIZE</font> and <font face="sans-serif"> MPI_FILE_PREALLOCATE</font>  
are considered writes to the file  
(which conflict with operations that access bytes  
at displacements between the old and new file sizes),  
and <font face="sans-serif"> MPI_FILE_GET_SIZE</font> is considered a read of the file  
(which overlaps with all accesses to the file).  
<P> 
 
<br> 
<em> Advice to users.</em>  
<P> 
Any sequence of operations containing the collective routines  
<font face="sans-serif"> MPI_FILE_SET_SIZE</font> and <font face="sans-serif"> MPI_FILE_PREALLOCATE</font>  
is a write sequence.  
As such, sequential consistency in nonatomic mode is not   
guaranteed unless the conditions in Section <a href="node385.htm#Node385">File Consistency</a>  
are satisfied.  
 (<em> End of advice to users.</em>) <br> 
File pointer update semantics (i.e., file pointers are   
updated by the amount accessed) are only guaranteed if file size  
changes are sequentially consistent.  
<P> 
 
<br> 
<em> Advice to users.</em>  
<P> 
Consider the following example.  Given two operations made by  
separate processes to a file containing 100 bytes:  an   
<font face="sans-serif"> MPI_FILE_READ</font> of 10 bytes and an <font face="sans-serif"> MPI_FILE_SET_SIZE</font> to 0  
bytes.  If the user does not enforce sequential consistency   
between these two operations,  
the file pointer may be updated by the amount  
requested (10 bytes) even if the amount accessed is zero bytes.  
 (<em> End of advice to users.</em>) <br> 

<P>
<hr>
<a href="node393.htm#Node393"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node384.htm#Node384"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node395.htm#Node395"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node384.htm#Node384"> Consistency and Semantics</a>
<b>Next: </b><a href="node395.htm#Node395"> Examples</a>
<b>Previous: </b><a href="node393.htm#Node393"> Logical vs. Physical File Layout</a>
<p>
<HR>
Return to <A HREF="node627.htm">MPI-5.0 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-5.0 of June 9, 2025<BR>
HTML Generated on March 2, 2025
</FONT>
</body>
</html>
