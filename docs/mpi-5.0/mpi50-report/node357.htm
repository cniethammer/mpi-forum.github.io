<!DOCTYPE html>
<html lang=en>
<head>
<!-- This file was generated by tohtml from chap-io/io-2-rendered -->
<!-- with the command
tohtml -default -numbers -dosnl -htables -quietlatex -allgif -endpage mpi5-forum-tail.htm -Wnoredef --mpidoc --latexpgm pdflatex --indexfile mpi50-report-html.idx --lstlisting -basedef mpi5defs.txt -o mpi50-report.tex mpi-reporthtml.tex 
-->
<title>Resizing a File</title>
</head>
<body style="background-color:#FFFFFF">
<hr><h2><span id="Node357">15.2.4. Resizing a File</span></h2>
<a href="node356.htm#Node356"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node353.htm#Node353"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node358.htm#Node358"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node353.htm#Node353"> File Manipulation</a>
<b>Next: </b><a href="node358.htm#Node358"> Preallocating Space for a File</a>
<b>Previous: </b><a href="node356.htm#Node356"> Deleting a File</a>
<p>
  
<P> 
<TABLE><TR><TD COLSPAN=2>MPI_FILE_SET_SIZE(<span style="white-space:nowrap">fh</span>, <span style="white-space:nowrap">size</span>)</TD></TR>  
<TR><TD><span style="font-size:0.900em;"> INOUT</span> fh</TD><TD>file handle (handle)</TD></TR>  
<TR><TD><span style="font-size:0.900em;"> IN</span> size</TD><TD>size to truncate or expand file (integer)</TD></TR>  
</TABLE>  
  <b> C binding</b><br>  <tt> int MPI_File_set_size(MPI_File fh, MPI_Offset size) <br></tt>  
  <b> Fortran 2008 binding</b><br>  <tt> MPI_File_set_size(fh, size, ierror) <br> TYPE(MPI_File), INTENT(IN) :: <span style="white-space:nowrap">fh</span><br>INTEGER(KIND=MPI_OFFSET_KIND), INTENT(IN) :: <span style="white-space:nowrap">size</span><br>INTEGER, OPTIONAL, INTENT(OUT) :: <span style="white-space:nowrap">ierror</span> <br></tt>  
  <b> Fortran binding</b><br>  <tt> MPI_FILE_SET_SIZE(FH, SIZE, IERROR) <br> INTEGER <span style="white-space:nowrap">FH</span>, <span style="white-space:nowrap">IERROR</span><br>INTEGER(KIND=MPI_OFFSET_KIND) <span style="white-space:nowrap">SIZE</span> <br></tt>  
<P> 
<font face="sans-serif"> MPI_FILE_SET_SIZE</font> resizes the file  
associated with the file handle <font face="sans-serif"> fh</font>.  
<font face="sans-serif"> size</font> is measured in bytes from the beginning of the file.  
<font face="sans-serif"> MPI_FILE_SET_SIZE</font> is collective over the group associated with the file;  
all processes in the group must pass identical values for <font face="sans-serif"> size</font>.  
<P> 
If <font face="sans-serif"> size</font> is smaller than the current file size,  
the file is truncated at the position defined by <font face="sans-serif"> size</font>.  
The implementation is free to deallocate file blocks located  
beyond this position.  
<P> 
If <font face="sans-serif"> size</font> is larger than the current file size,  
the file size becomes <font face="sans-serif"> size</font>.  
Regions of the file that have been previously written are unaffected.  
The values of data in the new regions in the file (those  
locations with displacements between old file size and <font face="sans-serif"> size</font>)  
are undefined.  
It is implementation dependent whether the <font face="sans-serif"> MPI_FILE_SET_SIZE</font> routine  
allocates file space---use <font face="sans-serif"> MPI_FILE_PREALLOCATE</font>  
to force file space to be reserved.  
<P> 
<font face="sans-serif"> MPI_FILE_SET_SIZE</font> does not affect the individual file pointers  
or the shared file pointer.  
If <font face="sans-serif"> MPI_MODE_SEQUENTIAL</font> mode was specified when the file was opened,  
it is erroneous to call this routine.  
<P> 
 
<br> 
<em> Advice to users.</em>  
<P> 
It is possible for the file pointers to point beyond the end of file  
after a <font face="sans-serif"> MPI_FILE_SET_SIZE</font> operation truncates a file.  
This is valid, and equivalent to seeking beyond the current end of file.  
 (<em> End of advice to users.</em>) <br> 
All nonblocking requests  
and split collective operations  
on <font face="sans-serif"> fh</font> must be completed  
before calling <font face="sans-serif"> MPI_FILE_SET_SIZE</font>.  
Otherwise, calling <font face="sans-serif"> MPI_FILE_SET_SIZE</font> is erroneous.  
As far as consistency semantics are concerned,  
<font face="sans-serif"> MPI_FILE_SET_SIZE</font> is a write operation  
that conflicts with operations that access bytes  
at displacements between the old and new file sizes  
(see Section <a href="node385.htm#Node385">File Consistency</a>).  
<P> 

<P>
<hr>
<a href="node356.htm#Node356"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node353.htm#Node353"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node358.htm#Node358"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node353.htm#Node353"> File Manipulation</a>
<b>Next: </b><a href="node358.htm#Node358"> Preallocating Space for a File</a>
<b>Previous: </b><a href="node356.htm#Node356"> Deleting a File</a>
<p>
<HR>
Return to <A HREF="node627.htm">MPI-5.0 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-5.0 of June 9, 2025<BR>
HTML Generated on March 2, 2025
</FONT>
</body>
</html>
