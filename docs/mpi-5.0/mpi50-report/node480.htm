<!DOCTYPE html>
<html lang=en>
<head>
<!-- This file was generated by tohtml from chap-binding/binding-2-rendered -->
<!-- with the command
tohtml -default -numbers -dosnl -htables -quietlatex -allgif -endpage mpi5-forum-tail.htm -Wnoredef --mpidoc --latexpgm pdflatex --indexfile mpi50-report-html.idx --lstlisting -basedef mpi5defs.txt -o mpi50-report.tex mpi-reporthtml.tex 
-->
<title>Problems Due to Strong Typing</title>
</head>
<body style="background-color:#FFFFFF">
<hr><h2><span id="Node480">20.1.11. Problems Due to Strong Typing</span></h2>
<a href="node479.htm#Node479"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node466.htm#Node466"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node481.htm#Node481"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node466.htm#Node466"> Support for Fortran</a>
<b>Next: </b><a href="node481.htm#Node481"> Problems Due to Data Copying and Sequence Association with Subscript Triplets</a>
<b>Previous: </b><a href="node479.htm#Node479"> Problems With Fortran Bindings for <font face="sans-serif"> MPI</font></a>
<p>
  
<P> 
All <font face="sans-serif"> MPI</font> functions with choice arguments associate actual arguments  
of different Fortran datatypes with the same dummy argument.  This is  
not allowed by Fortran 77, and in Fortran 90, it is technically  
only allowed if the function is overloaded with a different function  
for each type  
(see also Section <a href="node472.htm#Node472"><font face="sans-serif"> MPI</font> for Different Fortran Standard Versions</a>).  
In C, the use of <tt>void*</tt> formal arguments avoids these problems.  
Similar to C, with Fortran 2008 with TS 29113  
(and later) together with  
the <tt>mpi_f08</tt> module, the problem is avoided  
by declaring choice arguments with <tt>TYPE(*), DIMENSION(..)</tt>,  
i.e., as assumed-type and assumed-rank dummy arguments.  
<P> 
Using <tt>INCLUDE 'mpif.h'</tt> (deprecated), the following code fragment  
is technically invalid and may  
generate a compile-time error.  
<br> 
<pre style="background-color:#EFEFEF"><tt><b>integer</b> i(5) 
<b>real</b>    x(5) 
... 
<b>call</b> <b>mpi_send</b>(x, 5, <b>MPI_REAL</b>, ...) 
<b>call</b> <b>mpi_send</b>(i, 5, <b>MPI_INTEGER</b>, ...) 
</tt></pre> 
  
In practice, it is rare for compilers to do more than issue a  
warning.  
When using either the <tt>mpi_f08</tt> or <tt>mpi</tt> module, the problem is usually resolved through  
the assumed-type and assumed-rank declarations of the dummy arguments,  
or with a compiler-dependent mechanism that overrides type checking for choice arguments.  
<P> 
It is also technically invalid in Fortran to pass a scalar actual  
argument to an array dummy argument that is not a choice buffer argument.  
Thus, when using the <tt>mpi_f08</tt> or <tt>mpi</tt> module,  
the following code fragment usually generates an error since  
the  <font face="sans-serif"> dims</font> and  <font face="sans-serif"> periods</font> arguments to  
<font face="sans-serif"> MPI_CART_CREATE</font> are declared as assumed size arrays <tt> INTEGER</tt> :: <tt>DIMS(*)</tt> and <tt> LOGICAL</tt> :: <tt>PERIODS(*)</tt>.  
<P> 
<br><b> Example</b>  
It is erroneous to pass a variable instead of an array with one element.  
  
[Fortran 90, with a scalar that is not an array]FortranFortran 90!a scalar is not an arrayMPI_CART_CREATE<br> 
<pre style="background-color:#EFEFEF"><tt>! ----------------  THIS EXAMPLE IS ERRONEOUS --------------- 
<b>USE</b> <b>mpi_f08</b>     ! or  <b>USE</b> mpi 
<b>INTEGER</b> size 
<b>CALL</b> <b>MPI_Cart_create</b>(comm_old, 1, size, .TRUE., .TRUE., comm_cart, ierror) 
</tt></pre> 
  
  
Although this is a nonconforming <font face="sans-serif"> MPI</font> call,  
compiler warnings are not expected (but may occur)  
when using <tt>INCLUDE 'mpif.h'</tt> (deprecated)  
and this include file does not use Fortran explicit interfaces.  
<P> 

<P>
<hr>
<a href="node479.htm#Node479"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node466.htm#Node466"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node481.htm#Node481"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node466.htm#Node466"> Support for Fortran</a>
<b>Next: </b><a href="node481.htm#Node481"> Problems Due to Data Copying and Sequence Association with Subscript Triplets</a>
<b>Previous: </b><a href="node479.htm#Node479"> Problems With Fortran Bindings for <font face="sans-serif"> MPI</font></a>
<p>
<HR>
Return to <A HREF="node627.htm">MPI-5.0 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-5.0 of June 9, 2025<BR>
HTML Generated on March 2, 2025
</FONT>
</body>
</html>
